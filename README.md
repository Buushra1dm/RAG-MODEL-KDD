# KDD RAG Project


A Retrieval-Augmented Generation **(RAG)** system that provides natural-language answers about KDD (Kuwait Danish Dairy Company) products and career opportunities.  
Built with FastAPI, this project integrates web scraping, semantic search (FAISS), and LLMs to deliver grounded, domain-specific responses.

---

## ğŸ¦ Overview

The KDD RAG Pipeline transforms KDDâ€™s product and career data into an interactive knowledge system.  
Users can ask questions like:

> â€œWhat ice cream flavors are available under 1 KWD?â€  
> â€œAre there any open Python skills positions?â€

The system retrieves KDD data, ranks the most relevant information, and generates clear, factual answers â€” all locally and without cloud dependencies.

---

## ğŸ“‚ Project Structure

```

KDD PROJECT/
â”‚
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ clean/
â”‚   â”‚   â”œâ”€â”€ careers1_clean.json
â”‚   â”‚   â”œâ”€â”€ products_clean.json
â”‚   â”œâ”€â”€ embed/                   
â”‚   â”œâ”€â”€ index/
â”‚   â”‚   â”œâ”€â”€ faiss.index
â”‚   â”‚   â”œâ”€â”€ conf.json
â”‚   â”‚   â”œâ”€â”€ meta.json
â”‚   â”œâ”€â”€ careers.json
â”‚   â”œâ”€â”€ corpus.json
â”‚   â”œâ”€â”€ products_ice_cream_detailed.json
â”‚   â”œâ”€â”€ products_juices_detailed.json
â”‚
â”œâ”€â”€ static/
â”‚   â”œâ”€â”€ kdd_logo.png
â”‚   â”œâ”€â”€ style.css
â”‚   â”œâ”€â”€ tools.js
â”‚   â”œâ”€â”€ ui.js
â”‚
â”œâ”€â”€ templates/
â”‚   â”œâ”€â”€ tools.html
â”‚   â”œâ”€â”€ ui.html
â”‚
â”œâ”€â”€ build_faiss.py
â”œâ”€â”€ Careers_scraper.py
â”œâ”€â”€ Products_Scraping.py
â”œâ”€â”€ clean_and_build_corpus.py
â”œâ”€â”€ make_embeddings.py
â”œâ”€â”€ rag_api.py
â”œâ”€â”€ requirements.txt
â””â”€â”€ README.md

````

---

## âš™ï¸ Installation

### 1. Clone the Repository
```bash
git clone https://github.com/Buushra1dm/RAG-MODEL-KDD.git
cd KDD-RAG
````

### 2. Create and Activate a Virtual Environment

```bash
python -m venv venv
source venv/bin/activate     # macOS/Linux
venv\Scripts\activate        # Windows
```

### 3. Install Dependencies

```bash
pip install -r requirements.txt
```

---

##  Running the Project

### Step 1: Scrape Product and Career Data

```bash
python Products_Scraping.py
python Careers_scraper.py
```

### Step 2: Clean and Build the Corpus

```bash
python clean_and_build_corpus.py
```

### Step 3: Generate Embeddings

```bash
python make_embeddings.py
```

### Step 4: Build and Test the FAISS Index

To build the index:

```bash
python build_faiss.py build
```

To perform a quick search test:

```bash
python build_faiss.py search "your query here"
```

### Step 5: Run the FastAPI Server

```bash
uvicorn rag_api:app --reload
```

or 

```bash
python rag_api.py
```

Then open your browser at:

```
http://127.0.0.1:8000/ui
```

---

##  API Endpoints

| Endpoint       | Description                             |
| -------------- | --------------------------------------- |
| `/v1/products` | Retrieve all KDD products               |
| `/v1/careers`  | Retrieve all career entries             |
| `/v1/search`   | Perform FAISS-based search              |
| `/v1/ask`      | Full RAG query (retrieval + generation) |
| `/ui`          | Chat-style web interface                |

---

##  Architecture of the RAG Pipeline

The **Retrieval-Augmented Generation (RAG)** pipeline integrates semantic retrieval, reranking, and contextual generation to provide domain-grounded answers about KDD products and career opportunities.

### Pipeline Overview

1. **Data Preparation:**
   Scrapes and cleans product and career information from KDDâ€™s official websites, then merges both datasets into a unified structured corpus.

2. **Embeddings:**
   Uses `BAAI/bge-small-en-v1.5` to generate dense semantic embeddings that capture meaning beyond simple keywords.

3. **FAISS Indexing:**
   Stores the embeddings inside a FAISS `IndexFlatIP` structure for efficient cosine-similarity search across thousands of records.

4. **Retrieval:**
   When a user submits a query, it is embedded and compared against the FAISS index to identify semantically similar documents.

5. **Reranking:**
   The top retrieved results are passed to `BAAI/bge-reranker-large`, which cross-encodes and re-evaluates queryâ€“document relevance for maximum precision.

6. **Generation:**
   The refined context is used as input for `Qwen/Qwen2.5-1.5B-Instruct`, which generates a clear, concise, and fact-based answer derived only from verified KDD data.

7. **FastAPI Layer:**
   All operations are served through RESTful endpoints with a user-friendly web interface.

---

### Flow Diagram

```
Scraped Data â†’ Clean Corpus â†’ Embeddings â†’ FAISS Index â†’ Retrieve â†’ Rerank â†’ Generate Answer â†’ Display in UI
```

<img width="500" height="500" alt="rag" src="https://github.com/user-attachments/assets/ca04ddef-253c-4350-a64f-626be3efc151" />

---

##  Model Results & Examples

Below are some example outputs generated by the KDD RAG Pipeline, demonstrating the accuracy and grounding of responses.

### ğŸ’¬ Example 1 â€” KDD Career Query

**User Query:**

> â€œWhat jobs require SQL?â€

**RAG Response:**
The assistant retrieved relevant jobs from the KDD Careers dataset and generated a concise summary with location and requirements.

<img width="1000" height="1000" alt="sql" src="https://github.com/user-attachments/assets/c3f2ae97-a65d-4326-be6e-4066696decf3" />


---

### ğŸ’¬ Example 2 â€” Domain Restriction Logic

**User Query:**

> â€œWho is the CEO of Kudo?â€

**RAG Response:**
â€œThis question is outside the KDD domain. I can only answer about KDD products and careers.â€

<img width="1000" height="966" alt="ceo" src="https://github.com/user-attachments/assets/1133e870-a179-4d6d-af24-79addc6f54d6" />

---


---

## âš™ï¸ Tech Stack

| Component | Technology |
|------------|-------------|
| Backend | FastAPI |
| Web Scraping | Requests, BeautifulSoup, Selenium |
| Embeddings | `BAAI/bge-small-en-v1.5` |
| Reranker | `BAAI/bge-reranker-large` |
| Generator | `Qwen/Qwen2.5-1.5B-Instruct` |
| Vector Database | FAISS |
| Language | Python 3.11 |
| Frontend | HTML, CSS, JavaScript |

---

##  Key Features
- **End-to-End RAG Pipeline**
- **Domain-Grounded Answers**
- **Web Scraping Automation**
- **Semantic Search Engine**
- **Precision Reranking**
- **Interactive Web Interface**


---

##  Future Work 

- **Multi-Language Support**
- **Knowledge Expansion**
- **Hybrid Query Understanding**
---
